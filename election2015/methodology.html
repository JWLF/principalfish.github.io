<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<title>UK 2015 Election Methodology</title>
	<link type="text/css" rel="stylesheet" href="/stylesheets/template.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/main.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/infopages.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/theme.default.css"/>
	<link type="text/css" rel="stylesheet" href="/election2015/stylesheets/methodology.css"/>
	<link rel="stylesheet" href="/scripts/jqueryui/jquery-ui.structure.css"/>
	<link rel="shortcut icon" href="/img/logo.png">
</head>

<body>
	<script type="text/javascript" src="/election2015/scripts/dictionary.js"></script>
	<script type="text/javascript" src="/scripts/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="/scripts/jqueryui/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/election2015/scripts/papaparse.min.js"></script>
	<script type="text/javascript" src="/election2015/scripts/jquery.tablesorter.min.js"></script>
	<script type="text/javascript" src="/election2015/scripts/jquery.tablesorter.widgets.min.js"></script>

		<div id="wrapper">
			<div id="top">
				<h2>UK Election Maps - Methodology </span></h2>
				<script>
				$(function(){
					$("#menu").load("/menu.html")
				});
				</script>
				<div id="menu">

				</div>
			</div>

			<div id ="farleft">
				<div class="projections">

					<h3 class="notactive"><a href="/election2015/"> 2015 Projection</a></h3>
					<h3 class="notactive"><a href="/election2015/nowcast.html">2015 Nowcast</a></h3>
					<h3 class="notactive"><a href="/election2015/current.html"> Current Parliament</a></h3>

				</div>

				<div class ="projections" id="otherlinks">
					<h3 class="currentpage">Methodology</h3>
					<h3 class="notactive"><a href="/election2015/polls.html">Polls</a></h3>
					<h3 class="notactive"><a href="/election2015/seats.html">Seat List </a></h3>
					<!-- <h3 class="notactive"><a href="/election2015/trends.html">Trends</a></h3> -->
				</div>

			</div>

			<div id="methodology">

				<h2> About the Map </h2>

				<p>  The data for the map was originally OS data for UK constituencies in shapefile format and around 180Mb in size.
				  QGIS, <a href="http://geojson.io">geojson.io</a>, and <a href="http://mapshaper.org">mapshaper</a> were used to transform
					and simplify this data to a topojson file format of size 120kb.	This is rendered on the webpage using <a href="http://d3js.org">d3js</a>.</p>

				<p>	Unfortunately no OS data for Northern Ireland constituencies could be found so they were drawn by hand on
					top of a pre existing	map of Ireland in QGIS. </p>

				<p>	A series of python scripts takes poll/previous election data and outputs a csv file of all seats with 2010 winner, 2015 winner,
					2015 majority	and a percentage for each party.
					This file is loaded on the webpage and links with the topojson to colour the map, give information when seats are clicked and apply any filters.
					</p>

				<p> The vote totals table is a separate series of csv files updated by the same scripts. </p>

				<h2> About the Projection and Python Scripts</h2>

				<h4> Poll Analysis </h4>

				<p> I split polls regionally based on the EU constituencies of the UK - 9 in England plus Scotland, Wales and Northern Ireland</p>

				<p> Polling data is written to a csv file. The polling analysis script reads the polling region name and looks it up in a polling dictionary.
				"North England" for example will tell it to apply the poll to the EU constituencies "North East England", "North West England" and "Yorkshire and the Humber".</p>
				<p> Pollsters have different definitions for some regions, especially "South" and "Midlands".
					Figuring which region had which EU constituencies and was done by comparing sums of populations of the EU constituencies to the number of people polled. </p>
				<p>The script looks up the party percent for the overall region in 2010.
					It works out the difference implied by the poll and creates a separate poll for each EU constituency with party percents of 2010% + difference. </p>

				<p> After doing this for all polls, they are weighted proportional to &radic;<span class="squareroot">sample size / number of regions in polling region</span>
					and multiplied by 0.8 <sup>number of days since poll</sup> - they lose 20% of their value per day. <p>
				<p> They are then averaged per region and a set of 12 regional party polling averages is sent to the seat analysis script. </p>
				<p> Seat specific polls are done in a separate script and only lose 1.5% of their value per day.</p>

				<h4>Example</h4>
				<p>An Ashcroft poll has Con = 30%,  Lab = 40% in "North England" with a sample of 250 on March 16th. Today is March 21st</p>
				<p>The polling dictionary has the reference:  "North England" : ["northeastengland", "northwestengland", "yorkshireandthehumber"]. </p>
				<p>The overall percentages from 2010 are looked up for "North England" - say Con = 35%, Lab = 35%. (this is the sum of votes for each party in the 3 areas in "North England" / total of votes of 3 areas in "North England")</p>
				<p>The differences of -5 Con and +5 Lab are applied to 2010 results for each EU constituency.</p>
				<p>Say in North East England in 2010, Con = 30%, Lab = 45% would become Con = 25%, Lab = 50%.</p>
				<p>And in North West England, Con = 35%, Lab = 40% becomes Con = 30%, Lab = 45%.</p>
				<p>A separate poll is created for each EU constituency in "North England" </p>
				<p>This poll is given a weight proportional to &radic;<span class="squareroot">250 / 3</span>. 3 is number of EU constituencies in "North England".</p>
				<p> This weight is multipled by 0.8 <sup>5</sup>. 5 is number of days since poll. </p>
				<p> Once all polls in the file are read, split, analysed and weighted, these numbers are incorporated into the set of 12 overall regional polls.</p>




				<h4> Seat Analysis </h4>

				<p>For each party in each seat a series of formula is applied </p>











			</div>
			<div id="footer">
				<p> Copyright 2015 principalfish.co.uk</p>
			</div>


		</div>




</body>

<footer>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-58696407-1', 'auto');
		ga('send', 'pageview');

	</script>
</footer>
